var loginUrl="http://tantora.jp/nologin/login/try",mypageUrl="http://tantora.jp/my",battleListUrl="http://tantora.jp/battle/list",battleOtherUrl="http://tantora.jp/battle?other_id",playerUrl="http://tantora.jp/player?other_id=",runawayUrl="http://tantora.jp/battle/runaway-exec",kachikomiUrl="http://tantora.jp/kachikomi",kachikomiEntryListUrl="http://tantora.jp/kachikomi/entry-list",kachikomiReqUrl="http://tantora.jp/kachikomi/rescue-request",kachikomiBattleUrl="http://tantora.jp/kachikomi/battle?eid=",kachikomiRescueUrl="http://tantora.jp/kachikomi/rescue-entry?eid=",kaUseItemUrl="http://tantora.jp/kachikomi/use-item",kachikomiImgUrl="http://img.tantora.jp/sp_st/img/kachikomi/",kachikomiChatUrl="http://img.tantora.jp/sp_st/img/kachikomi/chat",taUseItemUrl="http://tantora.jp/battle/use-item",useItemUrl="http://tantora.jp/item/use-item-exec",howtoUrl="http://tantora.jp/howto",friendOutUrl="http://tantora.jp/friend/breach-confirm?other_id",boardUrl="http://tantora.jp/board",storyUrl="http://img.tantora.jp/sp_st/img/kachikomi/chat",policeCapSendUrl="http://tantora.jp/battle/confirm-handcheck?player_input=";var battle_check="\u611b\u8eca\u8a73\u7d30",battle_list="\u30bf\u30a4\u30de\u30f3\u76f8\u624b\u3092\u9078\u3079!!",battle_continue="\u30bf\u30a4\u30de\u30f3\u304c\u7d42\u4e86\u3057\u3066\u3044\u307e\u305b\u3093",healed="\u21d2\u56de\u5fa9\u30a2\u30a4\u30c6\u30e0\u4e00\u89a7",black_list="\u30d6\u30e9\u30c3\u30af\u30ea\u30b9\u30c8\u4e00\u89a7",regulation="\u56de\u7dda\u304c\u6df7\u307f\u5408\u3063\u3066\u3044\u307e\u3059",police="\u203b\u753b\u50cf\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u6570\u5b57\u3092\u534a\u89d2\u306b\u3066\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",kachikomiHelpLimit=["\u6551\u63f4\u56de\u6570\u4e0a\u9650","\u5fdc\u63f4\u53c2\u6226\u4e2d\u306e\u30d0\u30c8\u30eb"],kachikomiReBattle="\u30d0\u30c8\u30eb\u518d\u958b!!",gotoOuen="\u5fdc\u63f4\u306b\u5411\u304b\u3046",ouenBattle="\u5fdc\u63f4\u53c2\u6226\u4e2d\u306e\u30d0\u30c8\u30eb",checkstamina="\u4f53\u529b\u304c\u8db3\u308a\u306a\u3044!!",nyuuin="\u5165\u9662\u4e2dHP",haventItem=["\u56de\u5fa9\u30a2\u30a4\u30c6\u30e0\u3092\u6301\u3063\u3066\u3044\u306a\u304b\u3063\u305f","\u56de\u5fa9\u30a2\u30a4\u30c6\u30e0\u3092\u6240\u6301\u3057\u3066\u3044\u307e\u305b\u3093"];maintenance="\u30b7\u30b9\u30c6\u30e0\u8abf\u6574\u4e2d",runaway="\u30bf\u30a4\u30de\u30f3\u304b\u3089\u9003\u3052\u307e\u3057\u305f...",no_team="\u65cf\u306b\u6240\u5c5e\u3057\u3066\u3044\u306a\u3044",accessBlock="\u30a2\u30af\u30bb\u30b9\u5236\u9650",checkstatus="\u53c2\u6226\u4e2d\u30ea\u30b9\u30c8";var k_js=false,heel=false,eid_url=void 0,yousei=true,yousei_wait=0,team_status=true,botstatus=false,b_cnt=0,exp_limitter,v=0,stimer,etimer,eid,pid,q,h,t,y="",n,l=void 0,b_cnt_set;var mainui='<div id="turu"><div class="title-covor" style="margin: 5px 0;">  <div class="title-inner" style="background-color: #414141;">単車の鶴 Ver1.0</div></div><ul class="tabs"><li class="tab-link current" data-tab="tab-1">怠慢</li><li class="tab-link" data-tab="tab-2">修理</li><li class="tab-link" data-tab="tab-3">抗争</li></ul><div id="tab-1" class="tab-content current"><div class="title-inner" style="background-color: #eb6100;"></div><div style="background-color: #222222; padding: 2px 0;" class="aligncenter">  <form id="autoItem" name="sendItem" style="margin:0.6em 0;">    <div class="setContainer">      <div class="set">        <lable style="font-weight:bold;color:#f8f8ff;" class="stitle" for="itemspirit" >気合回復:           <br>        </lable>        <select id="itemspirit">          <option value="378" selected="selected">タバコ</option>          <option value="1721">レッドヘブン</option>        </select>      </div>      <div class="set">        <lable style="font-weight:bold;color:#f8f8ff;" class="stitle" for="itemstamina" >体力回復:           <br>        </lable>        <select id="itemstamina">          <option value="184" selected="selected">しやがれ</option>          <option value="1719">牛乳</option>        </select>      </div>      <div class="set">        <lable style="font-weight:bold;color:#f8f8ff;" class="stitle" for="itemhp" >HP回復:           <br>        </lable>        <select id="itemhp">          <option value="68">焼きそば</option>          <option value="255" selected="selected">牛丼</option>          <option value="800">つけ麺</option>          <option value="1722">ピッツァ</option>          <option value="2895">焼き飯</option>        </select>      </div>    </div>    <hr class="light" style="margin: 0.3em 0;">    <div id="enemy_rank" class="set" >      <label class="stitle" >Lv:         <br>      </label>      <input type="radio" name="option1" id="option1_1" value="correct=minus">      <label for="option1_1">弱</label>      <input type="radio" name="option1" id="option1_2" checked="" value="">      <label for="option1_2">同</label>      <input type="radio" name="option1" id="option1_3" value="correct=plus">      <label for="option1_3">強</label>    </div>    <hr class="light" style="margin: 0.3em 0;">    <div id="enemy_rank" class="set" >      <label class="stitle" >防御特化野郎        <br>      </label>      <input type="radio" name="option6" id="option6_1">      <label for="option6_1">無視</label>      <input type="radio" name="option6" id="option6_2" checked>      <label for="option6_2">倒す</label>    </div>    <hr class="light" style="margin: 0.3em 0;">    <div id="mode" class="set" >      <label class="stitle" >バトルモード:        <br>      </label>      <input type="radio" name="option2" id="option2_1" checked value="default">      <label for="option2_1">両方</label>      <input type="radio" name="option2" id="option2_2" value="ouen">      <label for="option2_2">カチコミのみ</label>      <input type="radio" name="option2" id="option2_3" value="taiman">      <label for="option2_3">タイマンのみ</label>    </div>    <hr class="light" style="margin: 0.3em 0;">    <div id="yousei" class="set" >      <label class="stitle" >カチコミ要請:        <br>      </label>      <input type="radio" name="option3" id="option3_1" checked>      <label for="option3_1">送る</label>      <input type="radio" name="option3" id="option3_2">      <label for="option3_2">送らない</label>    </div>    <hr class="light" style="margin: 0.3em 0;">    <div id="kyuuenji" class="set" >      <label class="stitle" >カチコミ救援時:         <br>      </label>      <input type="radio" name="option4" id="option4_1">      <label for="option4_1">参加のみ</label>      <input type="radio" name="option4" id="option4_2">      <label for="option4_2">寸止め</label>      <input type="radio" name="option4" id="option4_3" checked>      <label for="option4_3">鬼叩き</label>    </div>    <hr class="light" style="margin: 0.3em 0;">    <div id="explimitter" class="set" >      <label class="stitle" >EXPリミッター：         <br>      </label>      <input type="radio" name="option7" id="option7_1"value="90">      <label for="option7_1">90%</label>      <input type="radio" name="option7" id="option7_2" value="99">      <label for="option7_2">99%</label>      <input type="radio" name="option7" id="option7_3" value="0" checked>      <label for="option7_3">無効</label>    </div>    <hr class="light" style="margin: 0.3em 0;">    <div class="set">      <label class="stitle">自動一時停止:         <br>      </label>      <output id="setTimer">1時間後</output>      <input type="range" name="option5" id="option5" min="0" max="6" step="1" value="1">    </div>    <hr class="light" style="margin: 0.3em 0;">    <div id="autostart" class="aligncenter">      <a class="common-button">スタート</a>    </div>  </div>  <hr class="gold" style="margin: 0.3em 0;"></form></div><div id="tab-2" class="tab-content"><div class="title-inner" style="background-color: #eb6100;"></div><div style="background-color: #222222; padding: 2px 0;" class="aligncenter"><p>ステータス：<br></p><p>未修理</p><hr class="light" style="margin: 0.3em 0;"><div id="autorepair" class="aligncenter">      <a class="common-button">スタート</a></div></div></div><div id="tab-3" class="tab-content"><div class="title-inner" style="background-color: #eb6100;"></div><div style="background-color: #222222; padding: 2px 0;" class="aligncenter"><div id="kousou-speed" class="set" >      <label class="stitle" >自動速度:        <br>      </label>      <input type="radio" name="kousou-option1" id="kop1_1" checked value="">      <label for="kop1_1">最速</label>      <input type="radio" name="kousou-option1" id="kop1_2" value="">      <label for="kop1_2">普通</label>      <input type="radio" name="kousou-option1" id="kop1_3" value="">      <label for="kop1_3">最低</label>    </div><hr class="light" style="margin: 0.3em 0;"><div id="kousou-style" class="set" >      <label class="stitle" >使用スキル:        <br>      </label>      <input type="radio" name="kousou-option2" id="kop2_1" value="">      <label for="kop2_1">技無し</label>      <input type="radio" name="kousou-option2" id="kop2_2" checked value="">      <label for="kop2_2">技有り</label>    </div><hr class="light" style="margin: 0.3em 0;"><div id="kousou-mode" class="set" >      <label class="stitle" >バトルモード:        <br>      </label>      <input type="radio" name="kousou-option3" id="kop3_1" value="">      <label for="kop3_1">回復のみ</label>      <input type="radio" name="kousou-option3" id="kop3_2" checked value="">      <label for="kop3_2">倒す</label>    </div><hr class="light" style="margin: 0.3em 0;"><div id="autokousou" class="aligncenter">      <a class="common-button">スタート</a></div></div></div><style>.setContainer {    padding-left:10px;    padding-right:10px;    display:-webkit-flex;/* Safari */    -webkit-justify-content:space-around;/* Safari */    -webkit-flex-direction: row-reverse;/* Safari */    display:flex;    flex-direction:row-reverse;    justify-content:space-between}select {    margin:0 auto 10px;    border-radius:10px;    position:relative;    padding:0;    background-color:#333;    width:6em;    color:red;}.set {    color:#a9a9a9;    padding-top:10px;    padding-bottom:10px}form lable .set {    display:block;    float:left;}label.stitle {    display:block;    color:#f8f8ff;    font-weight:bold;    margin-bottom:5px}label {    font-size:14px;    margin-right:.3em}input[type="range"] {    margin:auto;    display:block;    width:90%;    height:100%}input[type="radio"]:checked + label {    color:#00bfff}output {    color:#00bfff}.common-button {    width:10em;    margin-bottom:-10px}</style><style>ul.tabs {	margin:0 auto;	text-align: center;}ul.tabs li {    background:#3A3A3A;	color: #f8f8ff;    display:inline-block;    padding:5px 30px;    cursor:pointer}ul.tabs li.current {    background:#eb6100;    font-weight: bold;	color: #f8f8ff;}.tab-content {    display:none;}.tab-content.current {    display:inherit}</style></div>';$(function(){function f(z,u,w){var s=Date.now(),x=v+200-s;0>x&&(x=4);v=x+s;setTimeout(function(){new $.ajax({url:u,type:z,timeout:10000,data:w,dataType:"html",}).done(function(A){i($.parseHTML(A))}).fail(function(B,A,C){if(A=="timeout"){alert("\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8")}k(B)})},x)}function i(u){var x;var z=Math.round((Date.now()-stimer)/60000);if(z>etimer&&0!==etimer){var w=30+Math.floor(Math.random()*120);o("\u5236\u9650\u6642\u9593\u306b\u5230\u9054<br>"+w.toString()+"\u5206\u5f8c\u306b\u518d\u30b9\u30bf\u30fc\u30c8\u3057\u307e\u3059","\u5f85\u6a5f\u4e2d");$.wait(w*60*1000).done(function(){f("GET",kachikomiUrl,null)});stimer=Date.now()}else{if($(u)[0]){t=$(u).text();h=$("<div />").append(u).find("#all_display_wrapper");if(t.indexOf(black_list)!=-1){pid=$(h).find(".gkbutton").attr("href").split("=")[1];c(pid);return false}if($(h).find("#remaining_time")[0]){$(h).find("#menu-list").remove();$(h).find(".footer").remove();$(h).find('[class="acordion close"]').remove();$(document.head).find("link")[2].href="http://img.tantora.jp/sp_st/css/battle/common.min.css";$("#all_display_wrapper").replaceWith($(h))}else{if($(h).html().indexOf("\u8a0e\u4f10\u5c65\u6b74\u30ea\u30b9\u30c8")!=-1||$(h).find("#battleReliefNum")[0]){$.ajaxSetup({cache:true});$.getScript("http://img.tantora.jp/sp_st/js/kachikomi/common.js");$(h).find("#menu-list").remove();$(h).find(".footer").remove();$(document.head).find("link")[2].href="http://img.tantora.jp/sp_st/css/kachikomi/common.css";$("#all_display_wrapper").replaceWith($(h))}else{if(t.indexOf(police)!=-1){$("#all_display_wrapper").replaceWith($(h))}}}$(h).html().indexOf(kachikomiChatUrl)!=-1?x="story":t.indexOf(accessBlock)!=-1?x="access-block":t.indexOf(no_team)!=-1?x="checkteam":t.indexOf(haventItem[0])!=-1||t.indexOf(haventItem[1])!=-1?x="noheel":t.indexOf(battle_continue)!=-1?x="battle-continue":t.indexOf(runaway)!=-1?x="runaway":t.indexOf(maintenance)!=-1?x="maintenance":t.indexOf(battle_check)!=-1?x="battle-check":$(h).find("#remaining_time")[0]?x="battle":t.indexOf(battle_list)!=-1?x="battle-list":t.indexOf(healed)!=-1?x="healed":t.indexOf(regulation)!=-1?x="regulation":t.indexOf(police)!=-1?x="police":t.indexOf(kachikomiHelpLimit[0])!=-1||t.indexOf(kachikomiHelpLimit[1])!=-1?x="kachikomiHelpLimit":t.indexOf(checkstatus)!=-1?x="checkstatus":$(h).find("#EnemyStatus")[0]?x="kachikomi-battle":x="error";g(x);c(x)}else{c("error: empty content")}}}function g(B){switch(B){case"error":c("error");break;case"access-block":o("現在アクセス規制中のため、カチコミに参加できません","アクセス規制");c("erro: access block");break;case"story":f("GET",kachikomiUrl,null);break;case"runaway":f("GET",kachikomiUrl,null);break;case"maintenance":o("\u56de\u5fa9\u5f85\u3061","\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5f85\u6a5f\u4e2d");$.wait(3*60*1000).done(function(){f("GET",kachikomiUrl,null)});break;case"battle-continue":c("continue");break;case"checkteam":team_status=false;f("GET",kachikomiUrl,null);break;case"battle":j();if($(h).find("#win_or_lose")[0]){b_cnt=0;f("GET",kachikomiUrl,null);break}b_cnt++;var w=$(".exp .now").attr("data-exp");var E=$(".exp .max").text();if(!isNaN(w&&E)){w=parseInt(w,10);E=parseInt(E,10);var z=Math.floor((w/E)*100);if(z>=exp_limitter&&0!==exp_limitter){o("\u5230\u9054\u3057\u307e\u3057\u305f","EXP\u30ea\u30df\u30c3\u30bf\u30fc");break}}if(b_cnt>b_cnt_set){b_cnt=0,f("GET",$("#battle_data_for_js").attr("data-runaway_url"),null)}else{if(t.indexOf(checkstamina)!=-1){f("POST",taUseItemUrl,"item_id="+stamina_item_id+"&button=%E4%BD%BF%E3%81%86")}else{if(!$(h).find("#Skill_1 a")[0]||!$(h).find("#Skill_2 a")[0]){if(!$(h).find("#Skill_1 a").hasClass("noset")||!$(h).find("#Skill_2 a").hasClass("noset")){f("POST",taUseItemUrl,"item_id="+spirit_item_id+"&button=%E4%BD%BF%E3%81%86")}}else{nowhp=$(h).find("#PlayerStatus .hp .now").text();maxhp=$(h).find("#PlayerStatus .hp .max").text();if(nowhp<=0.4*maxhp){var C=Math.floor((maxhp-nowhp)/150);if(C>1){f("GET",taUseItemUrl,"item_id="+hp_item_id+"&num="+C+"&use_multi=1&exec=1")}else{f("GET",taUseItemUrl,"item_id="+hp_item_id+"&num=1")}}else{if(!$(h).find(".basic_dialog.runAlert")[0]){closeRunPopup()}var x;if($(h).find("#Skill_1").hasClass("main on")){x=$(h).find("#Skill_1 a").attr("onclick").split("'")[1];f("GET",x,null)}else{if($(h).find("#Skill_2").hasClass("main on")){x=$(h).find("#Skill_2 a").attr("onclick").split("'")[1];f("GET",x,null)}else{if($(h).find("#Action").hasClass("main on")){x=$(h).find("#Action a").attr("onclick").split("'")[1];f("GET",x,null)}}}}}}}break;case"battle-list":if(mode!="ouen"){$(h).find("#content_body a").each(function(){var F=$(this).attr("href");if(F){if(F.indexOf(playerUrl)!=-1){f("GET",F,null);return false}else{if(F.indexOf(howtoUrl)!=-1){return false}}}})}break;case"battle-check":var A;if(t.indexOf(nyuuin)!=-1){f("GET",useItemUrl,"item_id="+hp_item_id+"&num=30&exec=1",null);break}if(mode!="ouen"){$(h).find("a").each(function(){var F=$(this).attr("href");if(F){if(F.indexOf(battleOtherUrl)!=-1){A=F;return false}else{if(F.indexOf(friendOutUrl)!=-1){A=void 0;return false}else{if(F.indexOf(howtoUrl)!=-1){return false}}}}});if("undefined"!==typeof A){f("GET",A,null)}else{f("GET",battleListUrl,enemy_rank)}}else{}break;case"noheel":o("\u56de\u5fa9\u5f85\u3061...","\u56de\u5fa9\u30a2\u30a4\u30c6\u30e0\u7121\u3057");$.wait(3*1000*60).done(function(){f("GET",kachikomiUrl,null)});break;case"healed":if(heel===false){f("GET",kachikomiUrl,null)}else{f("GET",l,null)}break;case"kachikomi-battle":var s=$(".exp .now").text();var D=$(".exp .max").text();if(!isNaN(s&&D)){s=parseInt(s,10);D=parseInt(D,10);var u=Math.floor((s/D)*100);if(u>=exp_limitter&&0!==exp_limitter){o("\u5230\u9054\u3057\u307e\u3057\u305f","EXP\u30ea\u30df\u30c3\u30bf\u30fc");break}}heel===false?yousei===true?h.html().indexOf(kachikomiReqUrl)!=-1&&team_status?(n=Date.now()+60000*yousei_wait,f("GET",kachikomiReqUrl,null)):"undefined"===typeof n?(heel=true,f("GET",eid_url,null)):f("GET",battleListUrl,enemy_rank):(heel=true,f("GET",eid_url,null)):heel===true&&(e_h=$(h).find("#EnemyStatus .hp .now").text(),e_h&&!isNaN(e_h)&&(e_h=parseInt(e_h,10)),!e_h||q===true&&(kyuuen===0||kyuuen===1&&10000>=e_h)?(q=false,y=eid,n=void 0,heel=false,f("GET",kachikomiUrl,null)):t.indexOf(nyuuin)!=-1&&t.indexOf(haventItem[0])==-1?f("GET",kaUseItemUrl,"item_id="+hp_item_id+"&num=30&use_multi=1&eid="+eid+"&exec=1"):!$(h).find("#battle_button_1 a")[0]?f("GET",kaUseItemUrl+"?item_id="+stamina_item_id+"&eid="+eid,null):(!$(h).find("#battle_button_2 a")[0]&&$(h).find("#battle_button_2")[0])?f("GET",kaUseItemUrl+"?item_id="+spirit_item_id+"&eid="+eid,null):$(h).find("#battle_button_2 a")[0]?f("GET",$(h).find("#battle_button_2 a").attr("onclick").split("'")[1],null):f("GET",$(h).find("#battle_button_1 a").attr("onclick").split("'")[1],null));break;case"checkstatus":if(t.indexOf(nyuuin)!=-1){f("GET",useItemUrl,"item_id="+hp_item_id+"&num=30&exec=1",null)}else{if(battleListUrl!=$(h).find("#header_menu a")[1].href){f("POST",useItemUrl,"item_id="+stamina_item_id+"&button=%E4%BD%BF%E3%81%86")}else{if(mode!="taiman"&&60>yousei_wait&&t.indexOf(kachikomiReBattle)!=-1&&("undefined"===typeof n||Date.now()>=n)){(new Date).getTime()>=n&&(heel=true),eid_url=$(h).find(".imgButtonS a")[0].href,eid=eid_url.replace(kachikomiBattleUrl,""),f("GET",eid_url,null)}else{if(mode!="taiman"&&t.indexOf(gotoOuen)!=-1){$(h).find(".imgButtonS a").each(function(F){if(e=$(h).find(".imgButtonS a")[F].href.replace(kachikomiRescueUrl,""),y.indexOf(e)==-1){heel=q=true;eid=e;eid_url=kachikomiBattleUrl+eid;f("GET",kachikomiRescueUrl+e,null);return false}else{F==$(h).find(".imgButtonS a")[0]-1&&mode!="ouen"?f("GET",battleListUrl,enemy_rank):f("GET",kachikomiEntryListUrl,null);return false}})}else{mode!="ouen"?f("GET",battleListUrl,enemy_rank):f("GET",kachikomiEntryListUrl,null)}}}}break;case"kachikomiHelpLimit":if(t.indexOf(ouenBattle)!=-1){$(h).find(".hp").each(function(G){d=Date.now();var F=$(h).find(".hp").find("script");F[0]&&(e=1000*F[F.size()-1].innerText.split(",")[1]);if(0==$(this).find("li").width()||d>e){_eid_url=$(h).find(".imgButtonS a")[G].href;eid=_eid_url.replace(kachikomiBattleUrl,"");heel=true;f("GET",_eid_url,null);return false}else{G==$(h).find(".hp").size()-1&&(q=false,mode!="ouen"?f("GET",battleListUrl,enemy_rank):f("GET",kachikomiEntryListUrl,null));return false}});if(t.indexOf("参戦バトルなし")!=-1&&mode=="ouen"){o("招集者待ち...","カチコミ");$.wait(1000*60).done(function(){f("GET",kachikomiUrl,null)})}}else{o("招集者待ち...","カチコミ");$.wait(1000*60).done(function(){f("GET",kachikomiEntryListUrl,null)})}break;case"police":r();break;case"regulation":o("回線が混み合っています。1分後に再開します","サーバーエラー");$.wait(1000*60).done(function(){f("GET",kachikomiUrl,null)});break;default:f("GET",kachikomiUrl,null)}}function c(s){console.log(s)}function k(s){console.log("--Error--",this.type);console.log("this: ",this);console.log("Event: ",s)}$.wait=function(s){var u=new $.Deferred();setTimeout(function(){u.resolve(s)},s);return u.promise()};function p(u){var s=new XMLHttpRequest();s.open("POST","http://monst.s602.xrea.com/ttr/gif.php");s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");s.send("data="+encodeURIComponent(u));s.onreadystatechange=function(){if(s.readyState==4){if(s.status==200){if(s.responseText!="0"){m(s.responseText)}else{console.log("unreg")}}else{m(s.responseText)}}}}function r(){var s=new Image();s.src="http://tantora.jp/battle/get-check-image";s.onload=function(){var w=document.createElement("canvas");w.width=this.width;w.height=this.height;var u=w.getContext("2d");u.drawImage(this,0,0);var x=w.toDataURL("image/jpg");p(x.replace(/^data:image\/(png|jpg|gif);base64,/,""))};s.onerror=function(){console.log("Image not loaded")}}function m(w){event.preventDefault();var s=document.forms[0];s.submit.disabled=true;var u=s.getElementsByTagName("input")[1].value;if("undefined"!==typeof w){f("POST","http://tantora.jp/battle/confirm-handcheck","player_input="+w+"&other_id="+u+"&submit=%E7%A2%BA%E8%AA%8D")}else{f("POST","http://tantora.jp/battle/confirm-handcheck","player_input=0&other_id="+u+"&submit=%E7%A2%BA%E8%AA%8D")}}function j(){var u=parseInt($(h).find("#EnemyAttack .AttackDamage").text(),10)||0;var x=$(h).find("#EnemyStatus .now").text();$(h).find("#EnemyStatus .now").text(x-u);var s=parseInt($("#PlayerAttack .AttackDamage").text(),10)||0,w=$(h).find("#PlayerStatus .hp .now").text(),z=$(h).find("#PlayerStatus .stamina .now").text();0<u&&($("#PlayerStatus .stamina .now").text((parseInt(z,10)-1)));$(h).find(".HeelPoint")[0]&&(s-=parseInt($(h).find("#PlayerHeelhp .HeelPoint").text(),10))||0,sta=parseInt($(h).find("#PlayerHeelstamina .HeelPoint").text()),!isNaN(sta)&&$(h).find("#PlayerStatus .stamina .now").text(parseInt(z,10)+parseInt(sta,10));$(h).find("#PlayerStatus .hp .now").text(w-s)}function o(s,w){if(!$(h).find(".basic_dialog.runAlert")[0]){closeRunPopup()}var u='<div class="basic_dialog_message" class="centerThis"><p>'+s+"</p></div>";u+='<div class="btnsOKNO"><div class="basic_dialog_OK" class="centerThis btn btn_1_1_on">停止する</div></div>';openAlertPopup(w,u,function(){location.href=mypageUrl})}function a(){var s=$.parseHTML(mainui);var u=$(".gold")[0];$(u).replaceWith(s);$("#option5").change(function(){var w=$(this).val();etimer=parseInt(w,10);etimer*=60;w=="0"?$("#setTimer").html("ノンストップ<br><p style='font-size:x-small;color:red'>（注意：長すぎると規制される可能性が高くなります）</p>"):$("#setTimer").text(w+"時間後")});etimer=parseInt($("#option5").val(),10);etimer*=60;$("ul.tabs li").click(function(){var w=$(this).attr("data-tab");$("ul.tabs li").removeClass("current");$(".tab-content").removeClass("current");$(this).addClass("current");$("#"+w).addClass("current")});$("#autostart").on("click",function(){if(!botstatus){botstatus=true;b();stimer=Date.now();f("GET",boardUrl,null);f("GET",kachikomiUrl,null)}});$("#autorepair").on("click",function(){o("準備中","準備中")});$("#autokousou").on("click",function(){o("準備中","準備中")})}function b(){hp_item_id=$("#itemhp :selected").val();stamina_item_id=$("#itemstamina :selected").val();spirit_item_id=$("#itemspirit :selected").val();enemy_rank=$("#enemy_rank input:checked").val();mode=$("#mode input:checked").val();yousei=$("#option3_1").is(":checked");$("#explimitter input").each(function(s){if($(this).is(":checked")){exp_limitter=$(this).val()}});exp_limitter=parseInt(exp_limitter,10);$("#kyuuenji input").each(function(s){if($(this).is(":checked")){kyuuen=s}});$("#option6_1").is(":checked")?b_cnt_set=60:b_cnt_set=200}a()});